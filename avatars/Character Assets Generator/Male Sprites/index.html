<html>
    <body style="background-color: #0b2428;">
        <div>
            <div style="display: inline-block">
                <canvas id="stage" style="border: 1px solid black;"></canvas>
            </div>

            <div style="display: inline-block; vertical-align: top;">
                <div>
                    Hair
                    <a href="#" onclick="changeHair(-1)">-</a>
                    <a href="#" onclick="changeHair(1)">+</a>
                </div>
                <div>
                    Head
                    <a href="#" onclick="changeHead(-1)">-</a>
                    <a href="#" onclick="changeHead(1)">+</a>
                </div>
                <div>
                    Eyes
                    <a href="#" onclick="changeEyes(-1)">-</a>
                    <a href="#" onclick="changeEyes(1)">+</a>
                </div>
                <div>
                    Body
                    <a href="#" onclick="changeBody(-1)">-</a>
                    <a href="#" onclick="changeBody(1)">+</a>
                </div>
                <div>
                    Accessory
                    <a href="#">-</a>
                    <a href="#">+</a>
                </div>
            </div>

            <div>
                <button onclick="saveAvatar()">Save</button>
                <a id="link"></a>
            </div>
        </div>

        <script>
          let height = 114
          let width = 114

          let headIndex = 1
          let eyesIndex = 1
          let bodyIndex = 1
          let hairIndex = 1

          let offsetX = 30
          let offsetY = 20

          let canvas = document.getElementById('stage')
          canvas.height = height
          canvas.width = width

          let ctx = canvas.getContext('2d')
          ctx.imageSmoothingEnabled = false

          function draw() {
            ctx.clearRect(0, 0, height, width)

            {
              var body = new Image()
              body.onload = function() {
                ctx.drawImage(body, offsetX, offsetY)
              }
              body.src = 'Human%20Male%20Body%20' + bodyIndex + '.png'
            }

            {
              var head = new Image()
              head.onload = function() {
                ctx.drawImage(head, offsetX, offsetY)
              }
              head.src = 'Human%20Male%20Head.png'
            }

            {
              var eyes = new Image()
              eyes.onload = function() {
                ctx.drawImage(eyes, offsetX, offsetY)
              }
              eyes.src = 'Human%20Male%20Eyes%20' + eyesIndex + '.png'
            }

            {
              var hair = new Image()
              hair.onload = function() {
                ctx.drawImage(hair, offsetX, offsetY)
              }
              hair.src = 'Human%20Male%20Hair%20' + hairIndex + '.png'
            }
          }

          function changeHead(change) {
            headIndex += change
            draw()
          }

          function changeEyes(change) {
            eyesIndex += change
            draw()
          }

          function changeBody(change) {
            bodyIndex += change
            draw()
          }

          function changeHair(change) {
            hairIndex += change
            draw()
          }

          function saveAvatar() {
            var link = document.getElementById('link')
            link.setAttribute('download', 'avatar.png')
            link.setAttribute('href', canvas.toDataURL('image/png').replace('image/png', 'image/octet-stream'))
            link.click()
          }

          draw()
        </script>
    </body>
</html>